<div *ngIf="!rol" class="container">
    <div class="imagen-portada">
        <img src="../../../../../assets/H_electro.svg" alt="">
    </div>
    <div class="titulo">Agregar Usuarios</div>
    <div class="subtitulo">Ingresar los datos del Nuevo Usuario</div>

    <div class="row align-items-start">
        <div class="col-md-6">
            <label for="text">Username</label>
            <div class="usuario">
                <i class="fa-solid fa-user-secret"></i>
                <input [(ngModel)]="usuario.username" type="text" class="input-usuario input1" placeholder="Username">
            </div>

            <label for="text">Contraseña</label>
            <div class="usuario">
                <i class="fa-solid fa-key"></i>
                <input [(ngModel)]="usuario.password" name="username" type="password" class="input-usuario input1"
                    placeholder="Contraseña">
            </div>
        </div>

        <div class="col-md-6">
            <label for="text">Nombre</label>
            <div class="usuario">
                <i class="fa-solid fa-signature"></i>
                <input [(ngModel)]="usuario.nombres" name="nombres" type="text" class="input-usuario input1"
                    placeholder="Nombre">

            </div>

            <label for="text">Apellido</label>
            <div class="usuario">
                <i class="fa-solid fa-signature"></i>
                <input [(ngModel)]="usuario.apellidos" name="apellidos" type="text" class="input-usuario input1"
                    placeholder="Apellido">
            </div>
        </div>
    </div>


    <div class="row align-items-start">
        <div class="col-md-6 col-12">
            <label for="select">Seleccione su Tipo de Documento</label>
            <div class="selecionar">
                <select [(ngModel)]="usuario.tipo_documento" name="tipo_documento" class="form-select">
                    <option selected>Opciones</option>
                    <option value="1">Cedula de Ciudadania</option>
                    <option value="2">Cedula de Extranjeria</option>
                </select>
            </div>
        </div>

        <div class="col-md-6 col-12">
            <label for="text">N° Documento</label>
            <div class="usuario">
                <i class="fa-solid fa-address-card"></i>
                <input [(ngModel)]="usuario.numero_documento" name="numero_documento" type="number"
                    class="input-pass input1" placeholder="Documento">
            </div>
        </div>
    </div>

    <div class="row align-items-center">
        <div class="col-md-6 col-12">
            <label for="email">Correo</label>
            <div class="usuario">
                <i class="fa-solid fa-envelope"></i>
                <input [(ngModel)]="usuario.email" name="email" type="email" class="input-usuario input1"
                    placeholder="Correo">

            </div>
        </div>

        <div class="col">
            <label for="number">Telefono</label>
            <div class="usuario">
                <i class="fa-solid fa-phone"></i>
                <input [(ngModel)]="usuario.celular" name="celular" type="number" class="input-usuario input1"
                    placeholder="Telefono Celular">
            </div>
        </div>
    </div>

    <div class="row align-items-center">
        <div class="col">
            <label for="email">Fecha</label>
            <div class="usuario">
                <input [(ngModel)]="usuario.fecha_nacimiento" name="fecha_nacimiento" type="date"
                    class="input-usuario input1">
            </div>
        </div>
    </div>

    <button (click)="guardarUsuario()" class="btn-guardar">Gestionar Roles</button>
</div>


<div *ngIf="rol" class="container">
    <header>
        <h1 class="titulo">Permisos Generales</h1>
    </header>


    <table class="table">
        <tbody *ngFor="let r of IterarRol">
            <tr>
                <th scope="text">{{ r.rol }}</th>
                <td>
                    <div class="form-check form-switch">
                        <label class="form-check-label" for="flexSwitchCheckDefault">Activar Rol</label>
                        <input class="form-check-input input" type="checkbox" (click)="activarRol(r.rol)">
                    </div>
                </td>
                <input [checked]="selectedRolePermissions[r.rol].length === r.permissions.length"
                    (click)="seleccionarTodosPermisos(r.rol)" class="form-check-input input" name="seleccionarTodos"
                    id="option-all" type="checkbox">
                <label class="form-check-label" for="option-all">Seleccionar Todos los Permisos</label>
            </tr>

            <tr *ngIf="rolePermissionsVisibility[r.rol]">
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-check" *ngFor="let pr of r.permissions">
                            <input [checked]="selectedRolePermissions[r.rol].includes(pr.permission)"
                                (click)="handlePermissionSelection(r.rol, pr.permission)" class="form-check-input input"
                                type="checkbox" [id]="'permiso-' + r.rol + '-' + pr.permission">
                            <label [for]="'permiso-' + r.rol + '-' + pr.permission" class="form-check-label">{{
                                pr.permission | lowercase }}</label>
                        </div>
                    </div>
                </div>
            </tr>





        </tbody>
    </table>
    <button class="btn-guardar">Guardar</button>
</div>